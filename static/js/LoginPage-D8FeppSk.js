import{a as E,b as L,c as $,d as q,e as I,f as M,g as N,h as z,i as F}from"./element-plus-DI_bgyNY.js";import{u as P,a as T,b as Q}from"./index-BD1jMUha.js";import{u as b,t as _}from"./@element-plus-CxMXKtfz.js";import{u as j}from"./vue-router-jgiCMz-_.js";import{_ as A}from"./plugin-vue:export-helper-DlAUqK2U.js";import{r as w,w as D,R as v,o as c,Q as s,M as o,a as x,u as d,U as t}from"./@vue-BIhkC9RN.js";import"./lodash-es-CxpLErxa.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-D3_Zpga0.js";import"./dayjs-CxMP4GVf.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./pinia-_JLQ5g36.js";import"./vue-demi-Dq6ymT-8.js";import"./pinia-plugin-persistedstate-BQU3TZ4K.js";import"./destr-CVtkxrq9.js";import"./deep-pick-omit-CegYQlcN.js";import"./axios-CCb-kr4I.js";const G={class:"flex"},H={__name:"LoginPage",setup(J){const u=w(!1),i=w(),a=w({username:"",password:"",repassword:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"change"},{min:5,max:10,message:"用户名必须是5-10位的字符",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15位的非空字符",trigger:"change"}],repassword:[{required:!0,message:"请输入密码",trigger:"change"},{pattern:/^\S{6,15}$/,message:"密码必须是6-15位的非空字符",trigger:"change"},{validator:(f,e,n)=>{e!==a.value.password?n(new Error("两次输入的密码不一致")):n()}}]},m=P(),R=async()=>{await i.value.validate(),await T(a.value),m.password=a.value.password,E.success("注册成功"),u.value=!1},C=j(),U=async()=>{await i.value.validate();const f=await Q(a.value);m.setToken(f.data.token),m.password=a.value.password,E.success("登录成功"),C.push("/")};return D(u,()=>{a.value={username:"",password:"",repassword:""}}),(f,e)=>{const n=L,l=$,p=q,y=I,g=M,k=N,S=z,B=F;return c(),v(B,{class:"login-page"},{default:s(()=>[o(n,{span:12,class:"bg"}),o(n,{span:6,offset:3,class:"form"},{default:s(()=>[u.value?(c(),v(k,{key:0,ref_key:"formRef",ref:i,model:a.value,rules:V,size:"large",autocomplete:"off"},{default:s(()=>[o(l,null,{default:s(()=>e[7]||(e[7]=[x("h1",null,"注册",-1)])),_:1}),o(l,{prop:"username"},{default:s(()=>[o(p,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.username=r),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),o(l,{prop:"password"},{default:s(()=>[o(p,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.password=r),"prefix-icon":d(_),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),o(l,{prop:"repassword"},{default:s(()=>[o(p,{modelValue:a.value.repassword,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.repassword=r),"prefix-icon":d(_),type:"password",placeholder:"请输入再次密码"},null,8,["modelValue","prefix-icon"])]),_:1}),o(l,null,{default:s(()=>[o(y,{class:"button",type:"primary","auto-insert-space":"",onClick:R},{default:s(()=>e[8]||(e[8]=[t(" 注册 ")])),_:1})]),_:1}),o(l,{class:"flex"},{default:s(()=>[o(g,{type:"info",underline:!1,onClick:e[3]||(e[3]=r=>u.value=!1)},{default:s(()=>e[9]||(e[9]=[t(" ← 返回 ")])),_:1})]),_:1})]),_:1},8,["model"])):(c(),v(k,{key:1,ref_key:"formRef",ref:i,model:a.value,rules:V,size:"large",autocomplete:"off"},{default:s(()=>[o(l,null,{default:s(()=>e[10]||(e[10]=[x("h1",null,"登录",-1)])),_:1}),o(l,{prop:"username"},{default:s(()=>[o(p,{modelValue:a.value.username,"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.username=r),"prefix-icon":d(b),placeholder:"请输入用户名"},null,8,["modelValue","prefix-icon"])]),_:1}),o(l,{prop:"password"},{default:s(()=>[o(p,{modelValue:a.value.password,"onUpdate:modelValue":e[5]||(e[5]=r=>a.value.password=r),name:"password","prefix-icon":d(_),type:"password",placeholder:"请输入密码"},null,8,["modelValue","prefix-icon"])]),_:1}),o(l,{class:"flex"},{default:s(()=>[x("div",G,[o(S,null,{default:s(()=>e[11]||(e[11]=[t("记住我")])),_:1}),o(g,{type:"primary",underline:!1},{default:s(()=>e[12]||(e[12]=[t(" 忘记密码？ ")])),_:1})])]),_:1}),o(l,null,{default:s(()=>[o(y,{class:"button",type:"primary","auto-insert-space":"",onClick:U},{default:s(()=>e[13]||(e[13]=[t(" 登录 ")])),_:1})]),_:1}),o(l,{class:"flex"},{default:s(()=>[o(g,{type:"info",underline:!1,onClick:e[6]||(e[6]=r=>u.value=!0)},{default:s(()=>e[14]||(e[14]=[t(" 注册 → ")])),_:1})]),_:1})]),_:1},8,["model"]))]),_:1})]),_:1})}}},me=A(H,[["__scopeId","data-v-7ecba66d"]]);export{me as default};
