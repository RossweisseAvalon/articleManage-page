const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LoginPage-DcMt3-wM.js","./element-plus-DI_bgyNY.js","./@vue-BIhkC9RN.js","./lodash-es-CxpLErxa.js","./async-validator-DKvM95Vc.js","./@vueuse-D3_Zpga0.js","./dayjs-CxMP4GVf.js","./@element-plus-CxMXKtfz.js","./@ctrl-r5W6hzzQ.js","./@sxzz-D9SI2xQl.js","./normalize-wheel-es-B6fDCfyv.js","../css/element-plus-CkqzWvkj.css","./vue-router-jgiCMz-_.js","./plugin-vueexport-helper-DlAUqK2U.js","./pinia-_JLQ5g36.js","./vue-demi-Dq6ymT-8.js","./pinia-plugin-persistedstate-BQU3TZ4K.js","./destr-CVtkxrq9.js","./deep-pick-omit-CegYQlcN.js","./axios-CCb-kr4I.js","../css/LoginPage-BIN_FIY0.css","./LayoutContainer-Bq5V9LPg.js","../css/LayoutContainer-CS14Zto9.css","./ArticleManage-DXO5S-mw.js","./PageContainer-Ep9YLR5U.js","../css/PageContainer-SBZ2rPYf.css","./article-C3oskIdI.js","./@wangeditor-8Iuzr9Wb.js","../css/@wangeditor-nHDhGvq6.css","../css/ArticleManage-BUW5ScDC.css","./ArticleChannel-D3n1ORYA.js","./UserAvatar-0pYNUxCE.js","../css/UserAvatar-CDSop_4e.css","./UserProfile-BUHku8tJ.js","./UserPassword-CKQZq9gj.js"])))=>i.map(i=>d[i]);
import{ab as R,o as A,c as O,M as E,Q as b,u as I,r as _,am as T}from"./@vue-BIhkC9RN.js";import{z as U,E as k,a as y}from"./element-plus-DI_bgyNY.js";import{d as V,c as C}from"./pinia-_JLQ5g36.js";import{s as D}from"./pinia-plugin-persistedstate-BQU3TZ4K.js";import{a as B}from"./axios-CCb-kr4I.js";import{c as j,a as q}from"./vue-router-jgiCMz-_.js";import"./lodash-es-CxpLErxa.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-D3_Zpga0.js";import"./dayjs-CxMP4GVf.js";import"./@element-plus-CxMXKtfz.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./vue-demi-Dq6ymT-8.js";import"./destr-CVtkxrq9.js";import"./deep-pick-omit-CegYQlcN.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(t){if(t.ep)return;t.ep=!0;const s=i(t);fetch(t.href,s)}})();const x={__name:"App",setup(e){return(r,i)=>{const a=R("router-view"),t=k;return A(),O("div",null,[E(t,{locale:I(U)},{default:b(()=>[E(a)]),_:1},8,["locale"])])}}},z="modulepreload",N=function(e,r){return new URL(e,r).href},P={},p=function(r,i,a){let t=Promise.resolve();if(i&&i.length>0){const o=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),g=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));t=Promise.allSettled(i.map(c=>{if(c=N(c,a),c in P)return;P[c]=!0;const m=c.endsWith(".css"),w=m?'[rel="stylesheet"]':"";if(!!a)for(let d=o.length-1;d>=0;d--){const f=o[d];if(f.href===c&&(!m||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${w}`))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":z,m||(u.as="script"),u.crossOrigin="",u.href=c,g&&u.setAttribute("nonce",g),document.head.appendChild(u),m)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o}return t.then(o=>{for(const n of o||[])n.status==="rejected"&&s(n.reason);return r().catch(s)})},$="http://big-event-vue-api-t.itheima.net",l=B.create({baseURL:$,timeout:5e3});l.interceptors.request.use(e=>{const r=L();return r.token&&(e.headers.Authorization=r.token),e},e=>Promise.reject(e));l.interceptors.response.use(e=>e.data.code===0?e:(y.error(e.data.message||"服务异常"),Promise.reject(e.data)),e=>{var r;return((r=e.response)==null?void 0:r.status)===401&&h.push("/login"),y.error(e.message||"服务异常"),Promise.reject(e)});const ce=({username:e,password:r,repassword:i})=>l.post("/api/reg",{username:e,password:r,repassword:i}),ue=({username:e,password:r})=>l.post("/api/login",{username:e,password:r}),H=()=>l.get("/my/userinfo"),le=e=>l.put("/my/userinfo",e),pe=e=>l.patch("/my/update/avatar",{avatar:e}),me=e=>l.patch("/my/updatepwd",e),L=V("user",()=>{const e=_(""),r=o=>e.value=o,i=_({}),a=async()=>{const o=await H();i.value=o.data.data},t=o=>i.value=o,s=_("");return{token:e,setToken:r,user:i,getUser:a,setUser:t,password:s}},{persist:!0}),S=C();S.use(D);const h=j({history:q(),routes:[{path:"/login",component:()=>p(()=>import("./LoginPage-DcMt3-wM.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url)},{path:"/",component:()=>p(()=>import("./LayoutContainer-Bq5V9LPg.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,22]),import.meta.url),redirect:"/article/manage",children:[{path:"/article/manage",component:()=>p(()=>import("./ArticleManage-DXO5S-mw.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,24,13,25,26,27,28,19,14,15,16,17,18,12,29]),import.meta.url)},{path:"/article/channel",component:()=>p(()=>import("./ArticleChannel-D3n1ORYA.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,11,24,13,25,26,14,15,16,17,18,19,12]),import.meta.url)},{path:"/user/avatar",component:()=>p(()=>import("./UserAvatar-0pYNUxCE.js"),__vite__mapDeps([31,24,1,2,3,4,5,6,7,8,9,10,11,13,25,14,15,16,17,18,19,12,32]),import.meta.url)},{path:"/user/profile",component:()=>p(()=>import("./UserProfile-BUHku8tJ.js"),__vite__mapDeps([33,24,1,2,3,4,5,6,7,8,9,10,11,13,25,14,15,16,17,18,19,12]),import.meta.url)},{path:"/user/password",component:()=>p(()=>import("./UserPassword-CKQZq9gj.js"),__vite__mapDeps([34,24,1,2,3,4,5,6,7,8,9,10,11,13,25,12,14,15,16,17,18,19]),import.meta.url)}]}]});h.beforeEach(e=>{if(!L().token&&e.path!=="/login")return"/login"});const v=T(x);v.use(h);v.use(S);v.mount("#app");export{ce as a,ue as b,$ as c,pe as d,le as e,me as f,l as i,L as u};
